
@{
    ViewBag.Title = "CheckoutForm";
}

<h2>Checkout</h2>

<div class="form-group">
    <label for="addressdet">Address:</label>
    <input type="text" class="form-control" id="addressdet" name="addressdet" required />
</div>
<div class="form-group">
    <label for="payment">Payment Method:</label>
    <select class="form-control" id="payment" name="payment" required>
        <option value="Credit Card">Credit Card</option>
        <option value="PayPal">PayPal</option>
        <option value="Bank Transfer">Bank Transfer</option>
    </select>
</div>
<input type="hidden" id="cartId" name="cartId" value="@ViewBag.CartID" />
<button type="button" id="submitCheckout" class="btn btn-primary">Submit</button>

<script>
    $(document).ready(function() {
        $('#submitCheckout').click(function () {
            var addressdet = $('#addressdet').val();
            var payment = $('#payment').val();
            var cartId = $('#cartId').val();

            $.post('/Store/SubmitCheckout', {
                addressdet: addressdet,
                payment: payment,
                cartId: cartId
            }, function (data) {
                if (data[0].success == 1) {
                    alert('Order placed successfully.');
                    window.location.href = '@Url.Action("ViewProducts", "Store")';
                } else {
                    console.log('Error: ' + data[0].errorMessage);
                }
            });
        });
    });
</script>