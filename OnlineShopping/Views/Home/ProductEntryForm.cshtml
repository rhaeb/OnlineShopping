@{
    ViewBag.Title = "ProductEntryForm";
}

<h2>Create Product</h2>
<body>
    <form id="productForm" method="post" action="../Home/ProductEntry" enctype="multipart/form-data">
        <div>
            Product Name <br />
            <input type="text" id="pName" name="pName" required class="form-control" oninput="validateNotEmpty(this)">
            <br />
            Price <br />
            <input type="number" id="price" name="price" step="0.01" min="0" required class="form-control">
            <br />
            Description <br />
            <textarea id="description" name="description" rows="4" class="form-control"></textarea>
            <br />
            Quantity <br />
            <input type="number" id="quantity" name="quantity" min="0" required class="form-control">
            <br />
            Category <br />
            <select id="category" name="category" required class="form-control">
                <option value="" selected disabled>Select category</option>
                <option value="FashionBeauty">Fashion & Beauty</option>
                <option value="Electronics">Electronics</option>
                <option value="Furniture">Furniture</option>
                <option value="Entertainment">Entertainment</option>
            </select>
            <br />
            <input type="file" name="img" accept="image/png,image/jpeg,image/jpg,image/gif,image/bmp" />
            <br /><br />
            <input type="button" class="btn btn-primary" id="btnBack" name="btnBack" value="Go Back" />&nbsp;
            <input type="submit" value="Submit" class="btn btn-success" id="btnclick" name="btnclick">
            <br />
        </div>
    </form>
</body>

<script src="~/Scripts/LatestJquery/jquery-3.7.1.min.js"></script>
<script>
    $(document).ready(function () {
        $("#btnBack").click(function () {
            window.location.href = '/Home/ListAllProducts';
        });

        $('#productForm').on('submit', function (e) {
            if (!validateForm()) {
                e.preventDefault();
                alert('Please fill out all required fields correctly.');
            }
        });
    });

    function validateForm() {
        let isValid = true;
        let pName = $('#pName').val().trim();
        if (pName === '') {
            isValid = false;
            alert('Product Name cannot be empty or spaces only.');
        }
        return isValid;
    }

    function validateNotEmpty(input) {
        let value = input.value.trim();
        if (value === '') {
            input.setCustomValidity('This field cannot be empty or spaces only.');
        } else {
            input.setCustomValidity('');
        }
    }
</script>
